type space
type object
 pointer location space
 type key
 type player
  property type hacker chronologuer
type wedge
 property state open locked
 pointer in space
 pointer out space
 pointer person player
 type door

event unlock player door key
 if object is locked
  define object as open
  destroy instrument
  print You hear some munching noises.
  print The door opened, but it ate the key.
 else
  if object is open
   print The door is open, AND it previously ate the key you're unlocking it with.
   if object.person is hacker
    print Hacker.
   if object.person is chronologuer
    print Time traveller.
  else
   print Whaaaaaa?

event enter player door
 if object is open
  if subject.location mirrors object.in
   align subject.location with object.out
   print You quested through the $ob to the outside.
  else
   if subject.location mirrors object.out
    align subject.location with object.in
    print You quested through the $ob to the inside.
   else
    print You're not near the $ob.
 else
  print The $ob is locked.
reality room

space in
space out
player Lyre
 location in
 chronologuer
door door
 in in
 out out
 locked
 person Lyre
key key
controlhook Lyre
enter enter
cross enter
open unlock
unlock unlock