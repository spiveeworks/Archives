:client
if "%param%"=="console" goto :client.console
if "%param%"=="handler" goto :client.handler

call :sendfile sping/spong/%public%/Ping
if "%error%"=="1" (echo server address invalid . . .
goto :eof) 
if "%error%"=="2" (echo Server is either offline or doesn't exist . . .
goto :eof) 
title %sendfile%
:user
cls
set user=
echo Username:
set /p user=^
> 
if "%user%"=="" goto :user
:pass
cls
echo Username:
echo - %user%
echo Password:
set /p pass=^
> 
if "%pass%"=="" goto :pass
:connect
cls
echo Connecting under username "%user%" . . .
call :sendfile lin/lnr/%public%/%user%¤%pass%
for /f "tokens=1* delims=%#break#%" %%f in ("%sendfile%") do (
set response=%%f
set didreg=%%g)
set sendfile=
if "%response%"=="failed" (echo Login failed . . .
pause>nul
goto :pass)
if "%response%"=="double" (echo This account is already online!
pause>nul
goto :user)
if "%didreg%"=="1" (echo Username successfully registered!) else (echo You are now online)

set private=%public%\trans.%user%
call :closed client.handler


pause>nul
:client.console
set line=
set /p line=
if "%line%"=="" goto :client.console
call :sendfile sping/spong/%public%/%line%
goto :client.console

:client.handler
for %%i in ("%private%") do (
set tag=%%~ni
set ext=%%~xi
call :client.checkmsg
)
goto :client.handler

:client.checkmsg
if "%ext%"=="ping" goto :client.pingong
goto :eof

:client.pingong
ren "%private%\%tag%.ping" %tag%.pong
goto :eof
